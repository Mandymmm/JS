<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JSON</title>
</head>
<body>
<script>

    //JSON：一种数据格式，主要应用于前后端交互，前台向后台发送请求时，后台返回的基本上是JSON格式的数据

//    JSON对象　和　JSON字符串

//    1.JSON对象：和js对象类似，但是属性名必须用双引号“""”包起来，属性值如果是字符串也要用双引号包起来
    var obj1={name:'zhufeng',age:'9'};//普通JS对象
    var obj2={"name":'zhufeng',"age":9};//JSON对象

    var arr=[
        {"name":'zhufeng',"age":9},
        {"name":'zhufeng',"age":9},
        {"name":'zhufeng',"age":9},
        {"name":'zhufeng',"age":9}
    ];//通常后台会把多条数据放在一个数组里 这是一个二维数组


//    2.JSON字符串：
    var jsonStr1='{"name":"zhufeng","age":9}';//将JSON对象放在引号里，一般用单引号 通常后台返回给我们的是JSON字符串
    var jsonStr2='{"name":"zhufeng","age":9}';


    //因为字符串处理不方便，所以在window上有一个JSON属性，提供了两个方法：
//      （1）JSON.parse() --- 用来将JSON格式的字符串转化为JSON格式对象 (不能对普通字符串进行转化 会报错)

//    var JSstr1=JSON.parse();//将要转化的数据放在括号里 会将转化后的结果返回出来  括号里如果不写会报错 所以一般为了保险起见会在里面放一个引号包着空数组 -- '[]'

    var jStr1=JSON.parse(jsonStr1);
    console.log(jStr1);// ->Object {name: "zhufeng", age: 9}

    /*   转化为对象以后就可以对对象进行for in循环遍历等操作
    for(var key in jStr1){
        console.log(jStr1[key]);
    }
*/


//      (2) JSON .stringify() --- 将普通格式对象/JSON格式的对象转换为JSON格式字符串 (普通格式对象是先转化为JSON格式对象然后再转化为JSON格式字符串)

    var objs={name:'huge',info:'nihao'};
    var jObj={"name":"huge","info":"nihao"};
    var Obj1=JSON.stringify(objs);
    var Obj2=JSON.stringify(jObj);
    console.log(Obj1);// '{"name":"huge","info":"nihao"}'
    console.log(typeof Obj1);// string
    console.log(Obj2);// '{"name":"huge","info":"nihao"}'
    console.log(typeof Obj2);// string



    //JSON 在ie7以下 不兼容  --- 需要用eval来解决

    eval('({"name":"huge","info":"nihao"})'); // 控制台输出->Object {name: "huge", info: "nihao"}

    var json1='{"name":"huge","info":"nihao"}';
    var data=eval('('+json1+')');
    console.log(data);


    //将JSON字符串转化为JSON对象  终极版  处理兼容性
    var json1='{"name":"huge","info":"nihao"}';
    var data='JSON' in window ? JSON.parse(json1) : eval('('+json1+')');
    console.log(data);
</script>
</body>
</html>